- !new_action
  name: Move
  action_type: MOVE
  speed: NORMAL
  cost: 1
  setup:
    - name: path
      cursor: adjacent_cell
      cursor_params:
        - !prop source.cell
  effects:
    - effect: !eff
        name: Move
        path: !prop action.path
      area: !prop source.cell
  widget:
    icon: './data/run.png'
    pressed_icon: './data/run2.png'

- !new_action
  name: Attack
  action_type: STANDARD
  speed: NORMAL
  cost: 1
  setup: []
  effects:
    - effect: !eff
        name: Damage
        extra_tags: ["melee"]
        amount: !prop source.damage
      area: !area
        name: Melee
        radius: 1
        center: !prop source.cell
  widget:
    icon: './data/punch(1).png'
    pressed_icon: './data/punch.png'

- !new_action
  name: GetRifle
  action_type: MOVE
  speed: NORMAL
  cost: 1
  setup: []
  effects:
    - effect: !eff
        name: ChangeStat
        stat_name: unit_state
        value: "rifle"
      area: !prop source.cell
    - effect: !eff
        name: ChangeStat
        stat_name: damage
        value: 5
      area: !prop source.cell 
  check: !expr [!prop source.unit_state, "==", "sword"]
  widget:
    icon: './data/musket.png'
    pressed_icon: './data/musket(1).png'

- !new_action
  name: GetSword
  action_type: MOVE
  speed: NORMAL
  cost: 1
  setup: []
  effects:
    - effect: !eff
        name: ChangeStat
        stat_name: unit_state
        value: "sword"
      area: !prop source.cell
    - effect: !eff
        name: ChangeStat
        stat_name: damage
        value: 15
      area: !prop source.cell 
  check: !expr [!prop source.unit_state, "==", "rifle"]
  widget:
    icon: './data/two-handed-sword.png'
    pressed_icon: './data/two-handed-sword2.png'
#
- !new_action
  name: Parry
  action_type: FULL
  speed: FAST
  cost: 1
  setup: []
  effects:
    - effect: !eff
        name: AddStatus
        status: !status
          name: Parry
      area: !prop source.cell
  check: !expr [!prop source.unit_state, "==", "sword"]
  widget:
    icon: './data/sword-clash(1).png'
    pressed_icon: './data/sword-clash.png'

- !new_action
  name: Shoot
  action_type: STANDARD
  speed: SLOW
  cost: 1
  setup:
    - name: target
      cursor: ray
      cursor_params:
        - !prop source.cell
        - 10
  effects:
    - effect: !eff
        name: Damage
        amount: 35
        target_coord: !prop action.target
      area: !area
        name: Ray
        source: !prop source.cell
        target: !prop action.target
        length: 10
    - effect: !eff
        name: ChangeStat
        stat_name: loaded
        value: false
      area: !prop source.cell
  check: !expr
    - [!prop source.unit_state, "==", "rifle"]
    - and
    - [!prop source.loaded]
  widget:
    icon: './data/gunshot.png'
    pressed_icon: './data/gunshot(1).png'

    
- !new_action
  name: Shoot
  action_type: STANDARD
  speed: SLOW
  cost: 1
  setup:
    - name: target
      cursor: ray
      cursor_params:
        - !prop source.cell
        - 10
  effects:
    - effect: !eff
        name: Damage
        amount: 35
        target_coord: !prop action.target
      area: !area
        name: Ray
        source: !prop source.cell
        target: !prop action.target
        length: 10
    - effect: !eff
        name: ChangeStat
        stat_name: loaded
        value: false
      area: !prop source.cell
  check: !expr
    - [!prop source.unit_state, "==", "rifle"]
    - and
    - [!prop source.loaded]
  widget:
    icon: './data/gunshot.png'
    pressed_icon: './data/gunshot(1).png'
    
    
- !new_action
  name: Reload
  action_type: FULL
  speed: NORMAL
  cost: 1
  setup: []
  effects:
    - effect: !eff
        name: ChangeStat
        stat_name: ammo
        value: !expr [!prop target.ammo, "-", 1]
      area: !prop source.cell
    - effect: !eff
        name: ChangeStat
        stat_name: loaded
        value: true
      area: !prop source.cell
  check: !expr
    - [!prop source.ammo, ">", 0]
    - and
    - [!prop source.loaded, "==", false]
  widget:
    icon: './data/clockwise-rotation(1).png'
    pressed_icon: './data/clockwise-rotation.png'

- !new_action
  name: Kick
  action_type: STANDARD
  speed: SLOW
  cost: 1
  setup: []
  effects:
    - effect: !eff
        name: Fatigue
        amount: 2
      area: !area
        name: Melee
        radius: 1
        center: !prop source.cell
  widget:
    icon: './data/high-kick(1).png'
    pressed_icon: './data/high-kick.png'
    
- !new_action
  name: MagicMushrooms
  action_type: STANDARD
  speed: FAST
  cost: 1
  setup: []
  effects: 
    - effect: !eff
        name: AddStatus
        status: !status
          name: DamageReduction
          duration: 2
          multiplier: 0.5
      area: !prop source.cell
    - effect: !eff
        name: AddStatus
        status: !status
          name: Regeneration
          duration: 2
          power: 10
      area: !prop source.cell
    - effect: !eff
        name: ChangeStat
        stat_name: mushrooms
        value: !expr [!prop source.mushrooms, "-", 1]
      area: !prop source.cell
  check: !expr [!prop source.mushrooms, ">", 0]
  widget:
    icon: './data/mushroom.png'
    pressed_icon: './data/mushroom_pressed.png'
    
- !new_action
  name: Charge
  action_type: FULL
  speed: SLOW
  cost: 2
  setup:
    - name: target
      cursor: ray
      cursor_params:
        - !prop source.cell
        - 2
  effects:
    - effect: !eff
        name: Damage
        amount: 20
        target_coord: !prop action.target
      area: !area
        name: Ray
        source: !prop source.cell
        target: !prop action.target
        length: 3
    - effect: !eff
        name: Move
        path: !prop action.target
      area: !prop source.cell
  widget:
    icon: './data/sprint.png'
    pressed_icon: './data/sprint_pressed.png'

- !new_action
  name: Regenerate
  action_type: FULL
  speed: SLOW
  cost: 3
  setup: []
  effects:
    - effect: !eff
        name: AddStatus
        status: !status
          name: Regeneration
          duration: -1
          power: !prop source.ammo
      area: !prop source.cell
  widget:
    icon: './data/linden-leaf.png'
    pressed_icon: './data/linden-leaf(1).png'
